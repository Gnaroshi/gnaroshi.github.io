<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>

        <!-- Bootstrap -->
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
            crossorigin="anonymous"
        />

        <!-- Font Awesome -->
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        />
        <!-- my css -->
        <!-- <link rel="stylesheet" href="./css/normalize.css" /> -->
        <link rel="stylesheet" href="./css/main.css" />

        <!-- jQuery -->
        <script
            src="https://code.jquery.com/jquery-3.7.1.js"
            integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4="
            crossorigin="anonymous"
        ></script>
    </head>
    <body>
        <!-- modal -->
        <div class="black-bg">
            <div class="white-bg">
                <h4>로그인하세요</h4>

                <form action="success.html">
                    <div class="my-3">
                        <input type="text" class="form-control" id="email" />
                    </div>
                    <div class="my-3">
                        <input type="password" class="form-control" id="pw" />
                    </div>
                    <button type="submit" class="btn btn-primary" id="send">
                        전송
                    </button>
                    <button type="button" class="btn btn-danger" id="close">
                        닫기
                    </button>
                </form>
            </div>
        </div>

        <!-- modal close function updating -->
        <script>
            //$(".black-bg").on("click", function () {
            //    $(".black-bg").removeClass("show-modal");
            //});

            document
                .querySelector(".black-bg")
                .addEventListener("click", function (e) {
                    if (e.target == this) {
                        document
                            .querySelector(".black-bg")
                            .classList.remove("show-modal");
                    }
                });
        </script>

        <div class="progress"><p></p></div>

        <!-- input check -->
        <script>
            var 입력한값;
            $("form").on("submit", function (e) {
                입력한값 = document.getElementById("email").value;
            });
            $("form").on("submit", function (e) {
                if (입력한값 == "") {
                    alert("아이디입력안함");
                    e.preventDefault();
                }
            });

            $("form").on("submit", function (e) {
                if (!/\S+@\S+\.\S+/.test(입력한값)) {
                    alert("이메일형식아님");
                    e.preventDefault();
                }
            });

            $("form").on("submit", function (e) {
                if (/[A-Z]/.test(입력한값) == false) {
                    alert("대문자없는데요");
                    e.preventDefault();
                }
            });
        </script>

        <!-- nav -->
        <nav class="navbar navbar-light bg-light">
            <div class="container-fluid">
                <span class="navbar-brand">UwU</span>
                <button
                    class="btn-black"
                    type="button"
                    onclick="location.href='list.html'"
                    style="width: 20px; height: 10px"
                ></button>
                <span class="badge bg-dark ms-auto mx-3">Dark 🔄</span>
                <button class="navbar-toggler" type="button">
                    <span class="navbar-toggler-icon"></span>
                </button>
            </div>
        </nav>

        <!-- 7 scroll -->
        <script>
            $(window).on("scroll", function () {
                var 움직인거리 = window.scrollY;
                if (움직인거리 >= 100) {
                    $(".navbar-brand").css("font-size", "15px");
                } else {
                    $(".navbar-brand").css("font-size", "20px");
                }

                var 현재보는높이 = window.scrollY;
                var 창크기 = document.querySelector("html").clientHeight;
                var 실제 = document.querySelector("html").scrollHeight;
                var 비율 = (
                    (parseFloat(현재보는높이) / (실제 - 창크기)) *
                    100.0
                ).toFixed(2);
                $(".progress").css("width", `${비율}vw`);
            });
        </script>

        <ul class="list-group">
            <li class="list-group-item">An item</li>
            <li class="list-group-item">A second item</li>
            <li class="list-group-item">A third item</li>
            <li class="list-group-item">A fourth item</li>
            <li class="list-group-item">And a fifth one</li>
        </ul>

        <script>
            var count = 0;
            $(".badge").on("click", function () {
                count++;
                if (count % 2) {
                    $(".badge").html("Light 🔄");
                } else {
                    $(".badge").html("Dark 🔄");
                }
                $(".badge").toggleClass("bg-white");
            });
        </script>

        <div class="main-bg">
            <h4>Shirts on Sale</h4>
            <button id="login" class="btn btn-danger">로그인</button>
        </div>

        <script>
            $("#login").on("click", function () {
                $(".black-bg").addClass("show-modal");
            });

            $("#close").on("click", function () {
                $(".black-bg").removeClass("show-modal");
            });
        </script>

        <script>
            $(".navbar-toggler").on("click", function () {
                $(".list-group").toggleClass("show-submenu");
            });
        </script>

        <!-- timeout 예제 -->
        <div class="alert alert-danger">
            <span>5</span>초 이내 구매시 사은품 증정!
        </div>

        <script>
            var t = 4;
            var td = setInterval(function () {
                if (t > 0)
                    document.querySelector(".alert > span").innerHTML = t;
                t--;
            }, 1000);
            setTimeout(function () {
                document.getElementsByClassName("alert")[0].style.display =
                    "none";
            }, 5000);
        </script>

        <!-- carousel -->
        <div style="overflow: hidden">
            <div class="slide-container">
                <div class="slide-box">
                    <img src="./img/H1.jpeg" alt="" draggable="false" />
                </div>
                <div class="slide-box">
                    <img src="./img/H2.jpeg" alt="" draggable="false" />
                </div>
                <div class="slide-box">
                    <img src="./img/H3.jpeg" alt="" draggable="false" />
                </div>
            </div>
        </div>

        <div
            style="
                margin-left: auto;
                margin-right: auto;
                display: flex;
                justify-content: space-evenly;
                width: 100%;
                padding-left: 10px;
                padding-right: 10px;
            "
        >
            <button class="slide-bf btn btn-dark">before</button>
            <button class="slide-1 btn btn-dark">1</button>
            <button class="slide-2 btn btn-dark">2</button>
            <button class="slide-3 btn btn-dark">3</button>
            <button class="slide-af btn btn-dark">after</button>
        </div>

        <!-- carousel -->
        <script>
            var cur = 0,
                imgcnt = 2;

            function move(nxt) {
                $(".slide-container").css(
                    "transform",
                    "translateX(" + nxt * -100 + "vw)"
                );
            }
            $(".slide-1").on("click", function () {
                cur = 0;
                move(cur);
            });
            $(".slide-2").on("click", function () {
                cur = 1;
                move(cur);
            });
            $(".slide-3").on("click", function () {
                cur = 2;
                move(cur);
            });
            $(".slide-bf").on("click", function () {
                if (cur == 0) cur = imgcnt;
                else cur--;
                move(cur);
            });
            $(".slide-af").on("click", function () {
                if (cur == imgcnt) cur = 0;
                else cur++;
                move(cur);
            });

            // 17
            var 시작좌표 = 0;
            var 눌렀냐 = false;
            console.log("윈도우크기" + document.documentElement.clientWidth);

            for (let i = 0; i < 3; i++) {
                $(".slide-box")
                    .eq(i)
                    .on("mousedown", function (e) {
                        시작좌표 = e.clientX;
                        눌렀냐 = true;
                        $(".slide-container").removeClass("slide-transition");
                    });
                $(".slide-box")
                    .eq(i)
                    .on("mousemove", function (e) {
                        let slideBoxWidth = $(".slide-box").width();
                        if (눌렀냐 === true) {
                            if (
                                (cur == 0 && e.clientX - 시작좌표 > 0) ||
                                (cur == 2 && e.clientX - 시작좌표 < 0)
                            ) {
                                console.log("wtf???" + cur);
                            } else {
                                $(".slide-container").css(
                                    "transform",
                                    `translateX( ${
                                        e.clientX -
                                        시작좌표 +
                                        -cur * slideBoxWidth
                                    }px )`
                                );
                            }
                        }
                        //console.log(e.clientX - 시작좌표);
                    });
                $(".slide-box")
                    .eq(i)
                    .on("mouseup", function (e) {
                        if (e.clientX - 시작좌표 < -100) {
                            cur++;
                            if (cur > 2) cur = 0;
                        } else if (e.clientX - 시작좌표 > 100) {
                            cur--;
                            if (cur < 0) cur = 2;
                        }
                        $(".slide-container").css(
                            "transform",
                            `translateX( ${cur * -100}vw )`
                        );

                        눌렀냐 = false;
                        $(".slide-container").addClass("slide-transition");
                    });
            }
            // for mobile
            for (let i = 0; i < 3; i++) {
                $(".slide-box")
                    .eq(i)
                    .on("touchstart", function (e) {
                        시작좌표 = e.touches[0].clientX;
                        눌렀냐 = true;
                        $(".slide-container").removeClass("slide-transition");
                    });
                $(".slide-box")
                    .eq(i)
                    .on("touchmove", function (e) {
                        let slideBoxWidth = $(".slide-box").width();
                        if (눌렀냐 === true) {
                            if (
                                (cur == 0 &&
                                    e.touches[0].clientX - 시작좌표 > 0) ||
                                (cur == 2 &&
                                    e.touches[0].clientX - 시작좌표 < 0)
                            ) {
                                console.log("wtf???" + cur);
                            } else {
                                $(".slide-container").css(
                                    "transform",
                                    `translateX( ${
                                        e.touches[0].clientX -
                                        시작좌표 +
                                        -cur * slideBoxWidth
                                    }px )`
                                );
                            }
                        }
                        //console.log(e.touches[0].clientX  - 시작좌표);
                    });
                $(".slide-box")
                    .eq(i)
                    .on("touchend", function (e) {
                        if (e.changedTouches[0].clientX - 시작좌표 < -100) {
                            cur++;
                            if (cur > 2) cur = 0;
                        } else if (
                            e.changedTouches[0].clientX - 시작좌표 >
                            100
                        ) {
                            cur--;
                            if (cur < 0) cur = 2;
                        }
                        $(".slide-container").css(
                            "transform",
                            `translateX( ${cur * -100}vw )`
                        );

                        눌렀냐 = false;
                        $(".slide-container").addClass("slide-transition");
                    });
            }
        </script>

        <!-- 6 return, float -->
        <script>
            // 1
            function toms(a, b) {
                return (a * 60 + b) * 1000;
            }
            //console.log(toms(1, 30));
            //console.log(toms(2, 10));

            // 2
            function dc(a, b) {
                return parseFloat(a * 0.9 + (b == true ? -1.5 : 0)).toFixed(2);
            }
            //console.log(dc(70, false));
            //console.log(dc(10, true));
            //console.log(dc(10.3, true));
        </script>

        <!-- 7 scroll -->
        <div
            class="lorem"
            style="width: 200px; height: 100px; overflow-y: scroll"
        >
            Lorem ipsum dolor sit, amet consectetur adipisicing elit. Laudantium
            voluptates veritatis fugiat laborum ipsam aliquam dolorem. Repellat
            praesentium, mollitia sint, saepe alias, eveniet esse eum odio
            distinctio eaque quisquam quaerat?
        </div>

        <!-- lorem -->
        <script>
            $(".lorem").on("scroll", function () {
                var 스크롤양 = document.querySelector(".lorem").scrollTop;
                var 실제높이 = document.querySelector(".lorem").scrollHeight;
                var 눈높이 = document.querySelector(".lorem").clientHeight;
                if (실제높이 - 스크롤양 - 눈높이 <= 10) {
                    alert("동의함?");
                    document.querySelector(".lorem").scrollTo(0, 0);
                }
            });
        </script>

        <div style="height: 1000px"></div>

        <!-- Bootstrap -->
        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
            crossorigin="anonymous"
        ></script>
    </body>
</html>
